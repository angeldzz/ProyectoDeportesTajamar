<div class="equipos-container">
  <div class="accordion-card" *ngFor="let equipo of equiposDisponibles; let idx = index">

    <!-- Header -->
    <div class="accordion-header"
         [ngClass]="idx % 2 === 0 ? 'azul' : 'naranja'"
         (click)="togglePanel(idx)">

      <div class="header-content">
        <div>
          <h5 class="equipo-nombre">{{ equipo.nombreEquipo }}</h5>
          <span class="curso-badge">Curso {{ equipo.idCurso }}</span>
        </div>

        <i class="pi pi-chevron-down arrow" [class.open]="openIndex === idx"></i>
      </div>
    </div>

    <!-- Body -->
    <div class="accordion-body" [class.open]="openIndex === idx">
      <h6 class="miembros-titulo">Miembros del equipo</h6>

      <div *ngIf="equipo.jugadores.length > 0; else sinMiembros" class="miembros-lista">
        <div class="member" *ngFor="let jugador of equipo.jugadores">
          <div class="member-info">
            <div class="player-avatar">
              <p-avatar
                [image]="jugador.imagen"
                size="normal"
                shape="circle">
              </p-avatar>
            </div>
            <span class="member-name">{{ jugador.usuario }}</span>
          </div>

          <button class="btn-delete"
                  (click)="borrarMiembroEquipoPorUsuario(jugador.idUsuario, jugador.idEquipo)">
            <i class="pi pi-trash"></i>
          </button>
        </div>
      </div>

      <ng-template #sinMiembros>
        <div class="sin-miembros">
          <i class="pi pi-users"></i>
          <p>Este equipo a√∫n no tiene miembros</p>
        </div>
      </ng-template>
    </div>

    <div class="equipo-footer">
      <button
        class="btn-unirse"
        [class.disabled]="usuarioYaEstaInscrito"
        [disabled]="usuarioYaEstaInscrito"
        (click)="unirseEquipo(equipo.idEquipo); $event.stopPropagation()">

        <i class="pi"
           [class.pi-check]="usuarioYaEstaInscrito"
           [class.pi-sign-in]="!usuarioYaEstaInscrito"></i>

        {{ usuarioYaEstaInscrito ? 'Ya perteneces a un equipo' : 'Unirse al equipo' }}
      </button>
    </div>

  </div>
</div>
