<div class="seleccion-equipo-page">
  <h2>Seleccionar Equipo</h2>

  @if (loading) {
    <div>Cargando equipos...</div>
  }
  @if (error) {
    <div class="error">Error: {{ error }}</div>
  }

  <div class="buscar">
    <input
      placeholder="Buscar equipo por nombre"
      [value]="filtro"
      (input)="filtro = $any($event.target).value"
      aria-label="Buscar equipos"
      />
    </div>

    @if (!loading && equipos && equipos.length) {
      <ul class="equipos-list">
        @for (e of filteredEquipos(); track e) {
          <li class="equipo-item">
            <div class="equipo-row">
              <div class="equipo-nombre">{{ e.nombreEquipo || e.nombre }}</div>
              <div class="equipo-actions">
                <button type="button" (click)="selectEquipo(e)">Seleccionar</button>
              </div>
            </div>
          </li>
        }
      </ul>
    } @else {
      <p>No hay equipos disponibles.</p>
    }


    @if (selectedEquipo) {
      <section class="detalle-equipo">
        <h3>Equipo: {{ selectedEquipo.nombreEquipo || selectedEquipo.nombre }}</h3>
        <button type="button" (click)="clearSelection()">Cerrar</button>
        @if (loadingMiembros) {
          <div>Cargando miembros...</div>
        }
        @if (miembros && miembros.length) {
          <div>
            <h4>Miembros</h4>
            <ul>
              @for (m of miembros; track m) {
                <li>{{ m.usuario || m.nombre || m.email || ('Usuario ' + (m.idUsuario || m.id)) }}</li>
              }
            </ul>
          </div>
        } @else {
          <p>No hay miembros registrados para este equipo.</p>
        }
      </section>
    }
  </div>
