<div class="equipos-page">
  <h2>Equipos</h2>

  @if (loading) {
    <div>Cargando equipos...</div>
  }
  @if (error) {
    <div class="error">Error: {{ error }}</div>
  }

  @if (!loading && equipos && equipos.length) {
    <ul class="equipos-list">
      @for (e of equipos; track e) {
        <li class="equipos-item">
          <div class="item-row">
            <button type="button" (click)="selectEquipo(e)">
              {{ e.nombreEquipo }}
            </button>
            <div class="actions">
              <button type="button" (click)="selectEquipo(e)">Ver</button>
              <button type="button" (click)="eliminarEquipo(e.idEquipo)">Eliminar</button>
            </div>
          </div>
        </li>
      }
    </ul>
  } @else {
    <p>No hay equipos disponibles.</p>
  }


  <section class="form-section">
    @if (!selected) {
      <h3>Crear equipo</h3>
    }
    @if (selected) {
      <h3>Editar equipo</h3>
    }

    <div class="form-row">
      <label>Nombre</label>
      <input [value]="form.nombreEquipo || ''" (input)="form.nombreEquipo = $any($event.target).value" />
    </div>

    <div class="form-row">
      <label>Mínimo jugadores</label>
      <input type="number" [value]="form.minimoJugadores ?? ''" (input)="form.minimoJugadores = ($any($event.target).value === '' ? null : +$any($event.target).value)" />
    </div>

    <div class="form-row">
      <label>Id color</label>
      <input type="number" [value]="form.idColor ?? ''" (input)="form.idColor = ($any($event.target).value === '' ? null : +$any($event.target).value)" />
    </div>

    <div class="form-row">
      <label>Id curso</label>
      <input type="number" [value]="form.idCurso ?? ''" (input)="form.idCurso = ($any($event.target).value === '' ? null : +$any($event.target).value)" />
    </div>

    <div class="form-row">
      <label>Id eventoActividad</label>
      <input type="number" [value]="form.idEventoActividad ?? ''" (input)="form.idEventoActividad = ($any($event.target).value === '' ? null : +$any($event.target).value)" />
    </div>

    <div class="form-actions">
      @if (!selected) {
        <button type="button" (click)="crearEquipo()">Crear</button>
      }
      @if (selected) {
        <button type="button" (click)="actualizarEquipo()">Guardar</button>
      }
      <button type="button" (click)="clearSelection()">Cancelar</button>
    </div>
  </section>

  @if (selected) {
    <section class="detalle">
      <h3>Detalle</h3>
      <p><strong>Nombre:</strong> {{ selected.nombreEquipo }}</p>
      <p><strong>Mínimo jugadores:</strong> {{ selected.minimoJugadores }}</p>
      @if (selected.idColor) {
        <p><strong>Id color:</strong> {{ selected.idColor }}</p>
      }
      @if (selected.idCurso) {
        <p><strong>Id curso:</strong> {{ selected.idCurso }}</p>
      }
    </section>
  }
</div>