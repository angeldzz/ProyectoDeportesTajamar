<div class="materiales-page">
  <h3>Gesti√≥n de Materiales</h3>
  <form (ngSubmit)="submit()" class="material-form">
    <div>
      <label>Master:</label>
      <select
        [(ngModel)]="model.idEventoActividad"
        name="idEventoActividad"
        required
        (change)="onMasterChange(model.idEventoActividad)">
        <option [ngValue]="undefined" disabled>-- Seleccione Master --</option>
        <option *ngFor="let m of masters" [value]="m.idCurso">
          {{ m.nombre }}
        </option>
      </select>
    </div>
    <div>

      <label>Alumno:</label>
      <select [(ngModel)]="model.idUsuario" name="idUsuario" required>
        <option [ngValue]="undefined" disabled>-- Seleccione Alumno --</option>
        <option *ngFor="let u of usuarios" [value]="u.idUsuario">
          {{ u.usuario }}
        </option>


      </select>
    </div>
    <div>
      <label>Nombre material</label>
      <input type="text" [(ngModel)]="model.nombreMaterial" name="nombreMaterial" />
    </div>
    <div>
      <label>Pendiente</label>
      <input type="checkbox" [(ngModel)]="model.pendiente" name="pendiente" />
    </div>
    <div class="actions">
      <button type="submit" [disabled]="loading">{{ editingId ? 'Actualizar' : 'Crear' }}</button>
      <button type="button" (click)="resetForm()">Limpiar</button>
    </div>
  </form>
  <hr />
  <table *ngIf="!loading && lista.length">
    <thead>
    <tr>
      <th>ID</th>
      <th>Material</th>
      <th>Usuario</th>
      <th>Acciones</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let m of lista">
      <td>{{ m.idMaterial }}</td>
      <td>{{ m.nombreMaterial }}</td>
      <td>{{ m.idUsuario }}</td>
      <td>
        <button (click)="remove(m.idMaterial)">Borrar</button>
      </td>
    </tr>
    </tbody>
  </table>
</div>
